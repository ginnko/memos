### 第一章 了解web及网络基础

- TIC/IP协议族
想这样把与互联网相关连的协议集合起来总称为TCP/IP.TCP/IP协议族按层次分别分为以下4层:应用层,传输层,网络层,数据链路层.

  - 应用层
  TIC/IP协议族内预存了各类通用的应用服务.比如FTP,DNS,HTTP

  - 传输层
  传输层对上层应用层,提供处于网络连接中的两台计算机之间的数据传输.在传输层中有两个性质不同的协议:TCP(传输控制协议)和UDP(用户数据报协议)

  - 网络层
  网络层用来处理网络上流动的数据包.数据包是网络传输的最小数据单位.该曾规定了通过怎样的路径(所谓的传输路线)到达对方计算机,并把数据包传送给对方.  
  与对方计算机之间通过多台计算机或网络设备进行传输时,网络层所起的作用就是在众多的选项内选择一条传输路线.

  - 链路层
  用来处理连接网络的硬件部分,包括控制系统,硬件的设备驱动,网卡,光纤等物理可见部分.硬件上的范畴均在链路层的作用范围内.

**一次web页面发送http请求的过程**  
  1. 作为发送端的客户端在应用层发出一个想看某个web页面的http请求.
  2. 为了传输方便,在传输层(TCP协议)把从应用层处收到的数据(http请求报文)进行分割,并在各个报文上打上标记序号及端口号后转发给网络层
  3. 在网络层(IP协议)增加作为通信目的地的MAC地之后转发给链路层.**至此,发往网络的通信请求就准备齐全**
  4. 接收端的服务器在链路层接收到数据,按序往上层发送,一直到应用层,当传输到应用层,才能算真正接收到由客户端发送过来的http请求.  

  发送端在层与层之间传输数据时,没经过一层时必定会被打上一个该层所属的首部信息.反之,接收端在层与层传输数据时,每经过一层时会把对应的首部消去.

- ip, tcp, dns, http
  - ip:位于网络层.ip协议的作用是把各种数据包传送给对方.其中最终要的条件是ip地址和MAC地址.
  - tcp:位于传输层.tcp协议为了更容易传送大数据才把数据分割,而且tcp协议能够确认数据最终是否送达到对方.
    tcp协议采用三次握手策略: 发送端首先发送一个带有SYN的标志的数据包给对方.接收端收到后,回传一个带有SYN/ACK标志的数据包一试传达确认信息.最后,发送端再回传一个带有ACK标志的数据包,代表握手结束.若在握手过程中,某个阶段莫名中断,tcp协议会再次以相同的顺序发送相同的数据包.

    字节流服务是指,为了方便传输,将大块数据分割成报文段为单位的数据包进行管理.
  - dns:位于应用层.提供域名到ip地址之间的解析服务.
  - http协议: 位于应用层.
    - 发送端:生成针对目标web服务器的http请求报文
    - 接收端:对请求内容进行处理
- URI格式(p27有)

### 第二章 简单的http协议

- 请求报文的构成
  方法,uri,协议版本,请求首部字段,内容实体
- 相应报文构成
  协议版本,状态码,状态码的原因短语,相应首部字段,主体
- http协议不保存状态,所以诞生了cookie
- http/1.1中可以使用的方法
  GET:获取资源
  POST:传输实体主体
  PUT:传输文件
  HEAD:获取报文首部
  DELETE:删除文件
  OPTIONS: 询问支持的方法
  TRACE:追踪路径
  CONNECT:要求用隧道协议(SSL,TSL)连接代理
- TCP持久连接
  只要任意一端没有明确提出断开连接,则保持TCP连接状态.在http/1.1中,所有的连接默认都是持久连接.
- 管线化技术允许同时并行发送多个请求.
- cookie技术
  cookie技术通过在请求和相应报文中写入cookie信息来控制客户端的状态.
  **Cookie会根据从服务器端发送的相应报文内的一个叫做SET-Cookie的首部字段信息,通知客户端保存Cookie.当下次客户端再往该服务器发送请求时,客户端会自动在请求报文中加入Cookie值后发送出去.**
  服务器端发现客户端发送过来的Cookie后,会去检查究竟是从哪一个客户端发来的连接请求,然后对比服务器上的记录,最后得到之前的状态信息.

### 第三章 http报文内的http信息

- http报文
  用于http协议交互的信息被称为http报文.

  http报文大致可分为报文首部和报文主体两部分.两者由**空行(CR+LF)**来划分.通常,并不一定要有报文主体.

  **空行(CR+LF)**:CR(Carriage Return,回车符,16进制)和LF(Line Feed,换行符,16进制)

  **报文首部结构**:
    1. 请求行:包含用于请求的方法,请求url和http版本
    2. 状态行:包含表明相应结果的状态码,原因短语和http版本
    3. 首部字段: 包含表示请求和相应的各种条件和属性的各类首部
      一般有四种: 通用首部,请求首部,相应首部,实体首部
    4. 其他: Cookie等