## 《网络是怎样连接的》读书笔记

### 第一章

#### 学完这章要知道

1. 浏览器如何解析网址
2. 请求消息的格式
3. 浏览器如何向DNS服务器查询域名对应的IP地址
4. DNS服务器是如何相互接力完成IP地址查询的
5. 查询到IP地址之后，浏览器是如何将消息委托给操作系统发欧式那个给web服务器的


#### 浏览器解析网址

1. URL开头的文字，比如`http:`、`ftp:`、`file:`、`mailto`这部分文字表示浏览器应当使用的访问方法。

2. 浏览器解析URL的过程

http协议可以拆成：`协议名`、`//`、`web服务器名`、`表示数据源的路径名`四部分，解析的过程就是捋清一个URL的这四部分。

3. 文件名和目录的省略

`/`表示顶级的根目录，`dir/`表示dir目录

理论上的省略规则：
  
  1. 目录末尾的`/`不应省略

  2. 如果省略一般表示文件名字

4. 解析的目的是要知道访问的目标在哪里，就是知道`web服务器`和`文件名`。

5. 请求消息：方法 + URI（文件路径、程序路径、http开头的URL）+ http版本号

6. HTTP使用的方法

  |方法|含义|
  |---|----|
  |GET|获取URI指定的信息。若URI指定的是文件，则返回文件内容；若指定的是CGI程序，则返回改程序的输出数据|
  |POST|从客户端向服务器发送数据。一般用于发送表单中填写的数据等情况|
  |HEAD|和GET基本相同。不过它只返回HTTP的消息头，并不返回数据的内容，用于获取文件最后更新时间等属性信息|
  |OPTIONS|用于通知或查询通信选项|
  |PUT|替换URI指定的服务器上的文件。如果URI指定的文件不存在，则创建该文件|
  |DELETE|删除URI指定的服务器上的文件|
  |TRACE|将服务器收到的请求行和头部直接返回给客户端。用于在使用代理的环境中检查改写请求的情况|
  |CONNECT|使用代理传输加密消息时使用的方法|
  |||

  - 使用POST方法时，URI会指向web服务器中运行的一个应用程序的文件名（如果用node写的，这个文件名会是xxxxx.js?）

  - 使用GET方法时，当web服务器收到消息后，会打开比如/dir/file.html文件，并读取出里面的数据，然后 **将读出的数据存放到响应消息中**，并返回给客户端。


### http请求消息

请求消息的 **第一行称为请求行**，格式：请求方法[空格]URI[空格]HTTP版本号（最常用的是1.1）。

请求方法是根据浏览器的工作状态确定的。在浏览器地址栏输入网址（使用GET）或是点击网页中的超链接（使用GET）或是点击提交按钮（可能使用GET也可能使用POST），这些都会触发浏览器工作状态的改变。

**第二行开始为消息头**，消息头以一个空行结束。